var documenterSearchIndex = {"docs":
[{"location":"generated/funnel_model/src/#Description","page":"funnel_model","title":"Description","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"A synthetic target introduced  in Neal (2003) to benchmark algorithms on situations where the local curvature of the target density  varies from one part of the space to another. Specifically, the shape of the target  (see pair plots below) is such that when y  0, the posterior is very narrow  while for y  0 it is wide. ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"The funnel is formally defined as follows:","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"beginaligned\ny sim textNormal(0 3) \nx_i sim textNormal(0 exp(y  textscale)) text for i in 1 dots d  \nendaligned","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Here we use the values: ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Parameter Value\nNumber of \"x\" dimensions, d 2\nScale factor 2.0","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"While the example is artificial, it is useful since it combines certain features  present in many real challenging targets (varying local curvature), while having  known moments for the difficult dimension to explore, y (since y is  marginally a normal distribution with known moments). ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Stan implementation","category":"page"},{"location":"generated/funnel_model/src/#Pair-plot","page":"funnel_model","title":"Pair plot","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Diagonal entries show estimates of the marginal  densities as well as the (0.16, 0.5, 0.84)  quantiles (dotted lines).  Off-diagonal entries show estimates of the pairwise  densities. ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Movie linked below (üçø) superimposes  100 iterations  of MCMC. ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<img src=\"pair_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"pair_plot.png\"> üîç Full page </a> ‚èê<a href=\"moving_pair.mp4\">üçø Movie </a> ‚èê<a href=\"https://sefffal.github.io/PairPlots.jl\">üîó Info </a>","category":"page"},{"location":"generated/funnel_model/src/#Trace-plots","page":"funnel_model","title":"Trace plots","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<img src=\"trace_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"trace_plot.png\"> üîç Full page </a>  ","category":"page"},{"location":"generated/funnel_model/src/#Intervals","page":"funnel_model","title":"Intervals","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Nominal coverage requested: 0.95  (change via interval_probability option which can be passed to report()). ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"The credible interval (naive_left, naive_right) is constructed using the quantiles  of the posterior distribution. It is naive in the sense that it does not take  into account additional uncertainty brought by the Monte Carlo approximation. ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"The radius of a Monte Carlo confidence interval with the same nominal coverage,  constructed on each of the end points of the naive interval is shown in  mcci_radius_left and mcci_radius_left. ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Finally, (fused_left, fused_right) is obtained by merging the two sources of  uncertainty: statistical, captured by the credible interval, and computational,  captured by the confidence intervals on the end points. ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"parameters naive_left naive_right mcci_radius_left mcci_radius_right fused_left fused_right\ny -5.29715 4.96179 0.148989 0.260617 -5.44613 5.22241\nx.1 -7.00311 7.56543 1.16737 1.65016 -8.17049 9.21559\nx.2 -7.59027 8.29563 1.06035 2.09436 -8.65063 10.39\nlog_density -11.509 -0.719295 0.504898 0.139379 -12.0139 -0.579917","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<a href=\"Intervals.csv\">üíæ CSV</a> ‚èê<a href=\"https://xkcd.com/2110/\">üîó Info </a>","category":"page"},{"location":"generated/funnel_model/src/#Moments,-MCSE,-ESS,-etc","page":"funnel_model","title":"Moments, MCSE, ESS, etc","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"The ESS/MCSE/Rhat estimators use InferenceReports.safe_summarystats(chains), which are based on  the truncated autocorrelation estimator (Geyer, 1992, sec 3.3) computed with FFT  with no lag limit.   As a result, these estimators should be  safe to use in the low relative ESS regime, in contrast to the defaults used in MCMCChains,  which lead to catastrophic ESS over-estimation in that regime.","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"parameters mean std mcse ess_bulk ess_tail rhat ess_per_sec\ny -0.102219 2.71049 0.0735448 1317.89 1387.81 1.00096 missing\nx.1 0.102085 3.5923 0.0993129 1606.5 1768.25 1.00154 missing\nx.2 0.0202585 3.63474 0.097013 1976.72 1598.82 1.00076 missing\nlog_density -5.15868 2.9031 0.0710729 1583.98 1447.12 1.0014 missing","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<a href=\"Moments__MCSE__ESS__etc.csv\">üíæ CSV</a> ","category":"page"},{"location":"generated/funnel_model/src/#Cumulative-traces","page":"funnel_model","title":"Cumulative traces","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"For each iteration i, shows the running average up to i, frac1i sum_n = 1^i x_n. ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<img src=\"cumulative_trace_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"cumulative_trace_plot.png\"> üîç Full page </a>  ","category":"page"},{"location":"generated/funnel_model/src/#Local-communication-barrier","page":"funnel_model","title":"Local communication barrier","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"When the global communication barrier is large, many chains may  be required to obtain tempered restarts.","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"The local communication barrier can be used to visualize the cause  of a high global communication barrier. For example, if there is a  sharp peak close to a reference constructed from the prior, it may  be useful to switch to a variational approximation.","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<img src=\"local_barrier.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"local_barrier.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Local-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/funnel_model/src/#Local-communication-barrier-(variational)","page":"funnel_model","title":"Local communication barrier (variational)","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Local communication barrier for the variational leg (ideally   smaller than the non-variational one).","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<img src=\"local_barrier_variational.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"local_barrier_variational.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Local-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/funnel_model/src/#GCB-estimation-progress","page":"funnel_model","title":"GCB estimation progress","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Estimate of the Global Communication Barrier (GCB)  as a function of  the adaptation round. ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"The global communication barrier can be used  to set the number of chains.  The theoretical framework of Syed et al., 2021 yields that under simplifying assumptions, it is optimal to set the number of chains  (the argument n_chains in pigeons()) to roughly 2Œõ.","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Last round estimate: 12212453270876722e-15","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<img src=\"global_barrier_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"global_barrier_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Global-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/funnel_model/src/#GCB-estimation-progress-(variational)","page":"funnel_model","title":"GCB estimation progress (variational)","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Estimate of the Global Communication Barrier (GCB)  as a function of  the adaptation round for the variational chain.","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Last round estimate: 1407764124803482","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<img src=\"global_barrier_variational_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"global_barrier_variational_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Global-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/funnel_model/src/#Evidence-estimation-progress","page":"funnel_model","title":"Evidence estimation progress","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Estimate of the log normalization (computed using  the stepping stone estimator) as a function of  the adaptation round. ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Last round estimate: 005920852221907236","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<img src=\"stepping_stone_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"stepping_stone_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-normalization/\">üîó Info </a>","category":"page"},{"location":"generated/funnel_model/src/#Round-trips","page":"funnel_model","title":"Round trips","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Number of tempered restarts   as a function of  the adaptation round. ","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"A tempered restart happens when a sample from the  reference percolates to the target. When the reference  supports iid sampling, tempered restarts can enable  large jumps in the state space.","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<img src=\"n_tempered_restarts_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"n_tempered_restarts_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Round-trips-and-tempered-restarts\">üîó Info </a>","category":"page"},{"location":"generated/funnel_model/src/#Swaps-plot","page":"funnel_model","title":"Swaps plot","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<img src=\"swaps_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"swaps_plot.png\"> üîç Full page </a>  ","category":"page"},{"location":"generated/funnel_model/src/#Pigeons-summary","page":"funnel_model","title":"Pigeons summary","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"round n_scans n_tempered_restarts global_barrier global_barrier_variational last_round_max_time last_round_max_allocation stepping_stone\n1 2 0 1.77636e-15 4.44089e-16 1.26834 6.39025e7 -6.66134e-16\n2 4 0 4.44089e-16 5.55112e-16 0.234744 9.44926e6 -1.66533e-16\n3 8 0 8.88178e-16 5.55112e-16 0.0187124 570208.0 3.33067e-16\n4 16 8 4.44089e-16 5.55112e-16 0.0371 1.17077e6 2.22045e-16\n5 32 24 1.11022e-15 8.88178e-16 0.0693825 2.13754e6 2.22045e-16\n6 64 41 7.77156e-16 1.17214 1.26621 7.79129e7 0.010495\n7 128 85 6.66134e-16 1.10238 0.43624 6.51339e7 0.0256111\n8 256 178 5.55112e-16 1.27763 0.898091 1.28333e8 -0.1326\n9 512 327 1.11022e-15 1.54146 1.98471 2.68712e8 -0.00689929\n10 1024 689 1.22125e-15 1.40776 3.65421 5.3478e8 0.0592085","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<a href=\"Pigeons_summary.csv\">üíæ CSV</a> ‚èê<a href=\"https://pigeons.run/dev/output-reports/\">üîó Info </a>","category":"page"},{"location":"generated/funnel_model/src/#Pigeons-inputs","page":"funnel_model","title":"Pigeons inputs","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"Keys Values\nextended_traces false\nchecked_round 0\nextractor nothing\nrecord Function[Pigeons.traces, Pigeons.round_trip, Pigeons.log_sum_ratio, Pigeons.timing_extrema, Pigeons.allocation_extrema]\nmultithreaded false\nshow_report true\nn_chains 10\nvariational GaussianReference(Dict{Symbol, Any}(:singleton_variable => [-0.1022186521087428, 0.10208457227813508, 0.020258496134460315]), Dict{Symbol, Any}(:singleton_variable => [2.710492433901846, 3.592297197801235, 3.6347366317132814]), 5)\nexplorer nothing\nn_chains_variational 10\ntarget StanLogPotential(funnel_model)\nn_rounds 10\nexec_folder nothing\nreference nothing\ncheckpoint false\nseed 1","category":"page"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"<a href=\"Pigeons_inputs.csv\">üíæ CSV</a> ‚èê<a href=\"https://pigeons.run/dev/reference/#Pigeons.Inputs\">üîó Info </a>","category":"page"},{"location":"generated/funnel_model/src/#Reproducibility","page":"funnel_model","title":"Reproducibility","text":"","category":"section"},{"location":"generated/funnel_model/src/","page":"funnel_model","title":"funnel_model","text":"run(`git clone https://github.com/Julia-Tempering/InferenceReport.jl`)\ncd(\"InferenceReport.jl\")\nrun(`git checkout 0c7301eca2344550e208ca70eff2a1ff6440f00c`)\n\nusing Pkg \nPkg.activate(\".\")\nPkg.instantiate()\n \n\nusing Pigeons\ninputs = Inputs(; target = Pigeons.stan_funnel(2), variational = GaussianReference(first_tuning_round = 5), n_chains_variational = 10, n_rounds = 10, record = [traces; round_trip; record_default()])\n \n\npt = pigeons(inputs)\n","category":"page"},{"location":"generated/banana_model/src/#Description","page":"banana_model","title":"Description","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"A common synthetic distribution used to benchmark MCMC methods.  For details on this implementation,  see Pagani et al. (2022). ","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Here we use the values: ","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Parameter Value\nNumber of \"y\" dimensions, d 2\nScale factor 1.0","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Stan implementation","category":"page"},{"location":"generated/banana_model/src/#Pair-plot","page":"banana_model","title":"Pair plot","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Diagonal entries show estimates of the marginal  densities as well as the (0.16, 0.5, 0.84)  quantiles (dotted lines).  Off-diagonal entries show estimates of the pairwise  densities. ","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Movie linked below (üçø) superimposes  100 iterations  of MCMC. ","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<img src=\"pair_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"pair_plot.png\"> üîç Full page </a> ‚èê<a href=\"moving_pair.mp4\">üçø Movie </a> ‚èê<a href=\"https://sefffal.github.io/PairPlots.jl\">üîó Info </a>","category":"page"},{"location":"generated/banana_model/src/#Trace-plots","page":"banana_model","title":"Trace plots","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<img src=\"trace_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"trace_plot.png\"> üîç Full page </a>  ","category":"page"},{"location":"generated/banana_model/src/#Intervals","page":"banana_model","title":"Intervals","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Nominal coverage requested: 0.95  (change via interval_probability option which can be passed to report()). ","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"The credible interval (naive_left, naive_right) is constructed using the quantiles  of the posterior distribution. It is naive in the sense that it does not take  into account additional uncertainty brought by the Monte Carlo approximation. ","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"The radius of a Monte Carlo confidence interval with the same nominal coverage,  constructed on each of the end points of the naive interval is shown in  mcci_radius_left and mcci_radius_left. ","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Finally, (fused_left, fused_right) is obtained by merging the two sources of  uncertainty: statistical, captured by the credible interval, and computational,  captured by the confidence intervals on the end points. ","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"parameters naive_left naive_right mcci_radius_left mcci_radius_right fused_left fused_right\nx -2.58925 2.26585 0.0475616 0.112907 -2.63682 2.37876\ny.1 -0.302211 6.91974 0.0327571 0.304065 -0.334968 7.22381\ny.2 -0.335462 6.63295 0.0723558 0.264375 -0.407818 6.89733\nlog_density -5.30357 -1.68049 0.408518 0.0141637 -5.71209 -1.66632","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<a href=\"Intervals.csv\">üíæ CSV</a> ‚èê<a href=\"https://xkcd.com/2110/\">üîó Info </a>","category":"page"},{"location":"generated/banana_model/src/#Moments,-MCSE,-ESS,-etc","page":"banana_model","title":"Moments, MCSE, ESS, etc","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"The ESS/MCSE/Rhat estimators use InferenceReports.safe_summarystats(chains), which are based on  the truncated autocorrelation estimator (Geyer, 1992, sec 3.3) computed with FFT  with no lag limit.   As a result, these estimators should be  safe to use in the low relative ESS regime, in contrast to the defaults used in MCMCChains,  which lead to catastrophic ESS over-estimation in that regime.","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"parameters mean std mcse ess_bulk ess_tail rhat ess_per_sec\nx -0.103588 1.41648 0.0446758 1022.47 1102.78 1.00701 missing\ny.1 2.01165 2.09199 0.0545212 1613.58 1301.01 0.999817 missing\ny.2 2.00957 2.09562 0.0535741 1742.69 1284.11 0.999468 missing\nlog_density -2.7082 0.981552 0.0229335 1786.87 1802.2 0.999798 missing","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<a href=\"Moments__MCSE__ESS__etc.csv\">üíæ CSV</a> ","category":"page"},{"location":"generated/banana_model/src/#Cumulative-traces","page":"banana_model","title":"Cumulative traces","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"For each iteration i, shows the running average up to i, frac1i sum_n = 1^i x_n. ","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<img src=\"cumulative_trace_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"cumulative_trace_plot.png\"> üîç Full page </a>  ","category":"page"},{"location":"generated/banana_model/src/#Local-communication-barrier","page":"banana_model","title":"Local communication barrier","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"When the global communication barrier is large, many chains may  be required to obtain tempered restarts.","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"The local communication barrier can be used to visualize the cause  of a high global communication barrier. For example, if there is a  sharp peak close to a reference constructed from the prior, it may  be useful to switch to a variational approximation.","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<img src=\"local_barrier.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"local_barrier.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Local-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/banana_model/src/#Local-communication-barrier-(variational)","page":"banana_model","title":"Local communication barrier (variational)","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Local communication barrier for the variational leg (ideally   smaller than the non-variational one).","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<img src=\"local_barrier_variational.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"local_barrier_variational.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Local-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/banana_model/src/#GCB-estimation-progress","page":"banana_model","title":"GCB estimation progress","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Estimate of the Global Communication Barrier (GCB)  as a function of  the adaptation round. ","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"The global communication barrier can be used  to set the number of chains.  The theoretical framework of Syed et al., 2021 yields that under simplifying assumptions, it is optimal to set the number of chains  (the argument n_chains in pigeons()) to roughly 2Œõ.","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Last round estimate: 8881784197001252e-16","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<img src=\"global_barrier_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"global_barrier_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Global-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/banana_model/src/#GCB-estimation-progress-(variational)","page":"banana_model","title":"GCB estimation progress (variational)","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Estimate of the Global Communication Barrier (GCB)  as a function of  the adaptation round for the variational chain.","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Last round estimate: 22563447523276765","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<img src=\"global_barrier_variational_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"global_barrier_variational_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Global-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/banana_model/src/#Evidence-estimation-progress","page":"banana_model","title":"Evidence estimation progress","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Estimate of the log normalization (computed using  the stepping stone estimator) as a function of  the adaptation round. ","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Last round estimate: -07750440316552649","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<img src=\"stepping_stone_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"stepping_stone_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-normalization/\">üîó Info </a>","category":"page"},{"location":"generated/banana_model/src/#Round-trips","page":"banana_model","title":"Round trips","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Number of tempered restarts   as a function of  the adaptation round. ","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"A tempered restart happens when a sample from the  reference percolates to the target. When the reference  supports iid sampling, tempered restarts can enable  large jumps in the state space.","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<img src=\"n_tempered_restarts_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"n_tempered_restarts_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Round-trips-and-tempered-restarts\">üîó Info </a>","category":"page"},{"location":"generated/banana_model/src/#Swaps-plot","page":"banana_model","title":"Swaps plot","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<img src=\"swaps_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"swaps_plot.png\"> üîç Full page </a>  ","category":"page"},{"location":"generated/banana_model/src/#Pigeons-summary","page":"banana_model","title":"Pigeons summary","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"round n_scans n_tempered_restarts global_barrier global_barrier_variational last_round_max_time last_round_max_allocation stepping_stone\n1 2 0 4.44089e-16 4.44089e-16 0.00364481 170448.0 4.44089e-16\n2 4 0 2.22045e-16 2.22045e-16 0.00715668 282608.0 -1.66533e-16\n3 8 0 6.66134e-16 0.0 0.0137253 570208.0 -2.22045e-16\n4 16 8 3.33067e-16 3.33067e-16 0.0297004 1.17077e6 0.0\n5 32 24 2.22045e-16 3.33067e-16 0.0650059 2.13754e6 4.44089e-16\n6 64 36 6.66134e-16 1.58137 0.195286 3.12643e7 -0.8462\n7 128 73 6.66134e-16 1.7878 0.426493 6.48835e7 -0.809928\n8 256 154 9.99201e-16 1.97169 0.82877 1.30888e8 -0.348366\n9 512 311 7.77156e-16 2.1588 1.72819 2.62537e8 -0.59099\n10 1024 625 8.88178e-16 2.25634 3.42377 5.35198e8 -0.775044","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<a href=\"Pigeons_summary.csv\">üíæ CSV</a> ‚èê<a href=\"https://pigeons.run/dev/output-reports/\">üîó Info </a>","category":"page"},{"location":"generated/banana_model/src/#Pigeons-inputs","page":"banana_model","title":"Pigeons inputs","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"Keys Values\nextended_traces false\nchecked_round 0\nextractor nothing\nrecord Function[Pigeons.traces, Pigeons.round_trip, Pigeons.log_sum_ratio, Pigeons.timing_extrema, Pigeons.allocation_extrema]\nmultithreaded false\nshow_report true\nn_chains 10\nvariational GaussianReference(Dict{Symbol, Any}(:singleton_variable => [-0.10358770214856587, 2.011651654110387, 2.0095743386153906]), Dict{Symbol, Any}(:singleton_variable => [1.4164799497692833, 2.0919854175342847, 2.0956166570083674]), 5)\nexplorer nothing\nn_chains_variational 10\ntarget StanLogPotential(banana_model)\nn_rounds 10\nexec_folder nothing\nreference nothing\ncheckpoint false\nseed 1","category":"page"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"<a href=\"Pigeons_inputs.csv\">üíæ CSV</a> ‚èê<a href=\"https://pigeons.run/dev/reference/#Pigeons.Inputs\">üîó Info </a>","category":"page"},{"location":"generated/banana_model/src/#Reproducibility","page":"banana_model","title":"Reproducibility","text":"","category":"section"},{"location":"generated/banana_model/src/","page":"banana_model","title":"banana_model","text":"run(`git clone https://github.com/Julia-Tempering/InferenceReport.jl`)\ncd(\"InferenceReport.jl\")\nrun(`git checkout 0c7301eca2344550e208ca70eff2a1ff6440f00c`)\n\nusing Pkg \nPkg.activate(\".\")\nPkg.instantiate()\n \n\nusing Pigeons\ninputs = Inputs(; target = Pigeons.stan_banana(2), variational = GaussianReference(first_tuning_round = 5), n_chains_variational = 10, n_rounds = 10, record = [traces; round_trip; record_default()])\n \n\npt = pigeons(inputs)\n","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Description","page":"toy_turing_unid_model","title":"Description","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Consider a Bayesian model where the likelihood is a binomial distribution with probability parameter p.  Let us consider an over-parameterized model where we  write p = p_1 p_2. Assume that each p_i has a uniform prior on the interval 0 1.","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"In summary:","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"beginaligned\np_1 sim textUnif(0 1) \np_2 sim textUnif(0 1) \ny sim textBin(n p_1 p_2)\nendaligned","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Here we use the values: ","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Parameter Value\nNumber of trials n 100000\nNumber of successes y 50000","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"This is a toy example of an unidentifiable parameterization. In practice many popular  Bayesian models are unidentifiable. ","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"When there are many observations, the posterior of  unidentifiable models concentrate on a sub-manifold,  making sampling difficult, as shown in the following pair plots.","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Pair-plot","page":"toy_turing_unid_model","title":"Pair plot","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Diagonal entries show estimates of the marginal  densities as well as the (0.16, 0.5, 0.84)  quantiles (dotted lines).  Off-diagonal entries show estimates of the pairwise  densities. ","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Movie linked below (üçø) superimposes  100 iterations  of MCMC. ","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"<img src=\"pair_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"pair_plot.png\"> üîç Full page </a> ‚èê<a href=\"moving_pair.mp4\">üçø Movie </a> ‚èê<a href=\"https://sefffal.github.io/PairPlots.jl\">üîó Info </a>","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Trace-plots","page":"toy_turing_unid_model","title":"Trace plots","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"<img src=\"trace_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"trace_plot.png\"> üîç Full page </a>  ","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Intervals","page":"toy_turing_unid_model","title":"Intervals","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Nominal coverage requested: 0.95  (change via interval_probability option which can be passed to report()). ","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"The credible interval (naive_left, naive_right) is constructed using the quantiles  of the posterior distribution. It is naive in the sense that it does not take  into account additional uncertainty brought by the Monte Carlo approximation. ","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"The radius of a Monte Carlo confidence interval with the same nominal coverage,  constructed on each of the end points of the naive interval is shown in  mcci_radius_left and mcci_radius_left. ","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Finally, (fused_left, fused_right) is obtained by merging the two sources of  uncertainty: statistical, captured by the credible interval, and computational,  captured by the confidence intervals on the end points. ","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"parameters naive_left naive_right mcci_radius_left mcci_radius_right fused_left fused_right\np1 0.505263 0.97405 0.00409735 0.0306463 0.501166 1.0047\np2 0.513555 0.99029 0.017401 0.00692447 0.496154 0.997214\nlog_density -13.565 -9.16351 0.969294 0.0158598 -14.5343 -9.14765","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"<a href=\"Intervals.csv\">üíæ CSV</a> ‚èê<a href=\"https://xkcd.com/2110/\">üîó Info </a>","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Moments,-MCSE,-ESS,-etc","page":"toy_turing_unid_model","title":"Moments, MCSE, ESS, etc","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"The ESS/MCSE/Rhat estimators use InferenceReports.safe_summarystats(chains), which are based on  the truncated autocorrelation estimator (Geyer, 1992, sec 3.3) computed with FFT  with no lag limit.   As a result, these estimators should be  safe to use in the low relative ESS regime, in contrast to the defaults used in MCMCChains,  which lead to catastrophic ESS over-estimation in that regime.","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"parameters mean std mcse ess_bulk ess_tail rhat ess_per_sec\np1 0.692481 0.148287 0.0209421 71.0811 203.673 1.01627 missing\np2 0.754933 0.155562 0.0210788 71.9976 203.673 1.00814 missing\nlog_density -10.3602 1.12445 0.0694097 208.782 383.238 1.00259 missing","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"<a href=\"Moments__MCSE__ESS__etc.csv\">üíæ CSV</a> ","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Cumulative-traces","page":"toy_turing_unid_model","title":"Cumulative traces","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"For each iteration i, shows the running average up to i, frac1i sum_n = 1^i x_n. ","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"<img src=\"cumulative_trace_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"cumulative_trace_plot.png\"> üîç Full page </a>  ","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Local-communication-barrier","page":"toy_turing_unid_model","title":"Local communication barrier","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"When the global communication barrier is large, many chains may  be required to obtain tempered restarts.","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"The local communication barrier can be used to visualize the cause  of a high global communication barrier. For example, if there is a  sharp peak close to a reference constructed from the prior, it may  be useful to switch to a variational approximation.","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"<img src=\"local_barrier.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"local_barrier.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Local-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/toy_turing_unid_model/src/#GCB-estimation-progress","page":"toy_turing_unid_model","title":"GCB estimation progress","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Estimate of the Global Communication Barrier (GCB)  as a function of  the adaptation round. ","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"The global communication barrier can be used  to set the number of chains.  The theoretical framework of Syed et al., 2021 yields that under simplifying assumptions, it is optimal to set the number of chains  (the argument n_chains in pigeons()) to roughly 2Œõ.","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Last round estimate: 35147080542681985","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"<img src=\"global_barrier_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"global_barrier_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Global-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Evidence-estimation-progress","page":"toy_turing_unid_model","title":"Evidence estimation progress","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Estimate of the log normalization (computed using  the stepping stone estimator) as a function of  the adaptation round. ","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Last round estimate: -11768917526035043","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"<img src=\"stepping_stone_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"stepping_stone_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-normalization/\">üîó Info </a>","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Round-trips","page":"toy_turing_unid_model","title":"Round trips","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Number of tempered restarts   as a function of  the adaptation round. ","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"A tempered restart happens when a sample from the  reference percolates to the target. When the reference  supports iid sampling, tempered restarts can enable  large jumps in the state space.","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"<img src=\"n_tempered_restarts_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"n_tempered_restarts_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Round-trips-and-tempered-restarts\">üîó Info </a>","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Swaps-plot","page":"toy_turing_unid_model","title":"Swaps plot","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"<img src=\"swaps_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"swaps_plot.png\"> üîç Full page </a>  ","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Pigeons-summary","page":"toy_turing_unid_model","title":"Pigeons summary","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"round n_scans n_tempered_restarts global_barrier global_barrier_variational last_round_max_time last_round_max_allocation stepping_stone\n1 2 0 2.0006 missing 0.015429 2.18426e6 -3538.08\n2 4 0 2.34832 missing 0.00326859 3.08366e6 -52.8968\n3 8 0 3.19937 missing 0.00497355 4.78456e6 -10.1343\n4 16 0 3.93311 missing 0.00999316 1.0151e7 -10.8158\n5 32 0 3.50845 missing 0.0204234 2.07815e7 -12.3277\n6 64 2 3.32197 missing 0.0392989 4.01745e7 -10.8109\n7 128 6 3.45067 missing 0.0961033 8.03371e7 -11.6315\n8 256 17 3.49445 missing 0.1872 1.61029e8 -11.675\n9 512 41 3.48487 missing 0.336155 3.21298e8 -11.667\n10 1024 75 3.51471 missing 0.688394 6.37383e8 -11.7689","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"<a href=\"Pigeons_summary.csv\">üíæ CSV</a> ‚èê<a href=\"https://pigeons.run/dev/output-reports/\">üîó Info </a>","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Pigeons-inputs","page":"toy_turing_unid_model","title":"Pigeons inputs","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"Keys Values\nextended_traces false\nchecked_round 0\nextractor nothing\nrecord Function[Pigeons.traces, Pigeons.round_trip, Pigeons.log_sum_ratio, Pigeons.timing_extrema, Pigeons.allocation_extrema]\nmultithreaded false\nshow_report true\nn_chains 10\nvariational nothing\nexplorer nothing\nn_chains_variational 0\ntarget TuringLogPotential{...}(Model{typeof(PigeonsDynamicPPLExt.toy_turing_unid_model), (:n_trials, :n_successes), (), (), Tuple{Int64, Int64}, Tuple{}, DefaultContext}(PigeonsDynamicPPLExt.toy_turing_unid_model, (n_trials = 100000, n_successes = 50000), NamedTuple(), DefaultContext()), DefaultContext(), 2)\nn_rounds 10\nexec_folder nothing\nreference nothing\ncheckpoint false\nseed 1","category":"page"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"<a href=\"Pigeons_inputs.csv\">üíæ CSV</a> ‚èê<a href=\"https://pigeons.run/dev/reference/#Pigeons.Inputs\">üîó Info </a>","category":"page"},{"location":"generated/toy_turing_unid_model/src/#Reproducibility","page":"toy_turing_unid_model","title":"Reproducibility","text":"","category":"section"},{"location":"generated/toy_turing_unid_model/src/","page":"toy_turing_unid_model","title":"toy_turing_unid_model","text":"run(`git clone https://github.com/Julia-Tempering/InferenceReport.jl`)\ncd(\"InferenceReport.jl\")\nrun(`git checkout 0c7301eca2344550e208ca70eff2a1ff6440f00c`)\n\nusing Pkg \nPkg.activate(\".\")\nPkg.instantiate()\n \n\nusing Pigeons\ninputs = Inputs(; target = Pigeons.toy_turing_unid_target(), n_rounds = 10, record = [traces; round_trip; record_default()])\n \n\npt = pigeons(inputs)\n","category":"page"},{"location":"reference/#Index","page":"Reference","title":"Index","text":"","category":"section"},{"location":"reference/","page":"Reference","title":"Reference","text":"","category":"page"},{"location":"reference/#Types-and-functions","page":"Reference","title":"Types and functions","text":"","category":"section"},{"location":"reference/#InferenceReport.Inference","page":"Reference","title":"InferenceReport.Inference","text":"The object of a report created by this package:\n\nalgorithm:  Algorithm that created the samples (currently assumes it is a PT struct). Optional, nothing if unspecfied.\n\nchains: Samples, stored in a Chains struct.\n\noriginal_dim: The original dimensionality of chains (the one stored might be truncated via options.max_dim)\n\n\n\n\n\n","category":"type"},{"location":"reference/#InferenceReport.PostprocessContext","page":"Reference","title":"InferenceReport.PostprocessContext","text":"Information passed to the processors:\n\ninference: The Inference on which the report will be based on.\n\noutput_directory: The resolved location of the output report.\n\ngenerated_markdown: Vector of Strings used internally to create the markdown page.\n\ngenerated_dict: Generated dictionary used internally to create a JSON object for indexing purposes.\n\noptions: The ReportOptions.\n\n\n\n\n\n","category":"type"},{"location":"reference/#InferenceReport.ReportOptions","page":"Reference","title":"InferenceReport.ReportOptions","text":"Options to control report:\n\nmax_moving_plot_iters: Maximum number of iterations in moving_pair_plot. Set to zero to avoid creating such movie.\nCreating movies are a bit slow, so in interactive mode the default is zero, and 100 in headless mode.\n\ntarget_name: Name of the target. If nothing, will attempt to auto-detect a name via multiple dispatch of the functions target_name or pigeons_target_name.\n\ntarget_description: Description of the target, specified using a TargetDescription. If nothing, will attempt to auto-detect it via target_description and pigeons_target_description.\n\nrender: If true, the report webpage's md files are rendered into html files.\n\nview: If true, the report webpage will be opened automatically.\n\npostprocessors: The postprocessors to use. Default is default_postprocessors.\n\nexec_folder:  The directory where the report will be created. A unique folder in results/all will be created by default and symlinked in results/latest.\n\nreproducibility_command: A command to instruct users how to reproduce.\nAt the moment implicitly assumes Pigeons will be used, and running these commands should return the Inputs.\n\nwriter: A Documenter.Writer instance used to render the document. Default is an HTML page, but other options including Documenter.LaTeX() are also possible.\n\nshow_error_traces: Useful for debugging, false by default.\n\nmax_dim: Upper bound on the number of dimensions to process. If the number of dimensions exceed this bound, only the prefix of dimensions will be processed.\n\ninterval_probability: Nominal coverage of intervals.\n\n\n\n\n\n","category":"type"},{"location":"reference/#InferenceReport.TargetDescription","page":"Reference","title":"InferenceReport.TargetDescription","text":"Description of a target.\n\nkeywords: Keywords for the target.\n\nbibliography: Contents of TeX bib file used to provide bibliographical references in the text, or nothing if no bibliography should be generated.\n\ntext: Description of the target.\n\n\n\n\n\n","category":"type"},{"location":"reference/#InferenceReport.add_markdown-Tuple{Any}","page":"Reference","title":"InferenceReport.add_markdown","text":"add_markdown(context; title, contents)\n\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.add_plot-Tuple{Any}","page":"Reference","title":"InferenceReport.add_plot","text":"add_plot(context; file, title, url_help, description, movie)\n\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.add_table-Tuple{Any}","page":"Reference","title":"InferenceReport.add_table","text":"add_table(\n    context;\n    table,\n    title,\n    url_help,\n    description,\n    kw_pretty_table_args...\n)\n\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.as_doc_page-Tuple{Any}","page":"Reference","title":"InferenceReport.as_doc_page","text":"as_doc_page(context)\n\n\nPass to the pages argument of  makedocs  to properly include the generated page in the Documenter.jl navigation bar. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.default_postprocessors-Tuple{}","page":"Reference","title":"InferenceReport.default_postprocessors","text":"default_postprocessors()\n\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.gcb_progress-Tuple{Any}","page":"Reference","title":"InferenceReport.gcb_progress","text":"gcb_progress(context)\n\n\nProgression of the global communication barrier estimate as  a function of the round. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.get_pt-Tuple{PostprocessContext}","page":"Reference","title":"InferenceReport.get_pt","text":"get_pt(context)\n\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.headless-Tuple{Any}","page":"Reference","title":"InferenceReport.headless","text":"headless(lambda)\n\n\nEnclose calls to report_to_docs and report  with different defaults for the view and render options,  setting them to false by default.\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.intervals-Tuple{Any, Any}","page":"Reference","title":"InferenceReport.intervals","text":"intervals(chain, probability)\n\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.intervals-Tuple{Any}","page":"Reference","title":"InferenceReport.intervals","text":"intervals(context)\n\n\nTable of credible intervals. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.lcb-Tuple{Any}","page":"Reference","title":"InferenceReport.lcb","text":"lcb(context)\n\n\nThe local communication barrier estimated in the last round. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.logz_progress-Tuple{Any}","page":"Reference","title":"InferenceReport.logz_progress","text":"logz_progress(context)\n\n\nProgression of the log-normalization constant estimate as  a function of the round. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.moments-Tuple{Any}","page":"Reference","title":"InferenceReport.moments","text":"moments(context)\n\n\nTable of posterior means, variances, MCSE, ESS, R-hat. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.moving_pair_plot-Tuple{Any}","page":"Reference","title":"InferenceReport.moving_pair_plot","text":"moving_pair_plot(context)\n\n\nA PairPlot movie showing the sample in the reference chain moving in the state space. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.mpi_standard_out-Tuple{Any}","page":"Reference","title":"InferenceReport.mpi_standard_out","text":"mpi_standard_out(context)\n\n\nMPI standard output. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.pair_plot-Tuple{Any}","page":"Reference","title":"InferenceReport.pair_plot","text":"pair_plot(context)\n\n\nCreate a pair plot using PairPlot.jl.\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.pigeons_inputs-Tuple{Any}","page":"Reference","title":"InferenceReport.pigeons_inputs","text":"pigeons_inputs(context)\n\n\nTable of inputs used in Pigeons. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.pigeons_summary-Tuple{Any}","page":"Reference","title":"InferenceReport.pigeons_summary","text":"pigeons_summary(context)\n\n\nThe summary table produced by Pigeons during its execution. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.pigeons_target_description-Tuple{Any}","page":"Reference","title":"InferenceReport.pigeons_target_description","text":"pigeons_target_description(target)\n\n\nBy default, dispatch to pigeons_target_description(target, Val(Symbol(pigeons_target_name(target)))),  to handle \"vague types\" such as TuringLogPotential and StanLogPotential.\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.pigeons_target_name-Tuple{TuringLogPotential}","page":"Reference","title":"InferenceReport.pigeons_target_name","text":"pigeons_target_name(target)\n\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.render-Tuple{Any}","page":"Reference","title":"InferenceReport.render","text":"render(context)\n\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.report-Tuple{Any, InferenceReport.ReportOptions}","page":"Reference","title":"InferenceReport.report","text":"report(algo_or_chains, options)\n\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.report-Tuple{Any}","page":"Reference","title":"InferenceReport.report","text":"report(algo_or_chains; args...)\n\n\nalgo_or_chains can be either a PT struct  (returned by pigeons(..)) or  a Chains.\n\nargs are used to create a ReportOptions. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.report_to_docs-Tuple{Any}","page":"Reference","title":"InferenceReport.report_to_docs","text":"report_to_docs(algo_or_chains; doc_root, args...)\n\n\nSimilar to report but with different defaults to  facilitate including the  result as part of a larger documentation site. \n\nUse in combination with as_doc_page.\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.reproducibility_info-Tuple{Any}","page":"Reference","title":"InferenceReport.reproducibility_info","text":"reproducibility_info(context)\n\n\nGenerated reproducibility script. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.round_trip_progress-Tuple{Any}","page":"Reference","title":"InferenceReport.round_trip_progress","text":"round_trip_progress(context)\n\n\nProgression of the number of round trips as  a function of the round. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.swaps_plot-Tuple{Any}","page":"Reference","title":"InferenceReport.swaps_plot","text":"swaps_plot(context)\n\n\nA plot showing progression of mean swap acceptance per chain as a function of round.\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.target_description-Tuple{PostprocessContext}","page":"Reference","title":"InferenceReport.target_description","text":"target_description(context)\n\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.target_name-Tuple{PostprocessContext}","page":"Reference","title":"InferenceReport.target_name","text":"target_name(context)\n\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.trace_plot-Tuple{Any}","page":"Reference","title":"InferenceReport.trace_plot","text":"trace_plot(context)\n\n\nTrace plots. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.trace_plot_cumulative-Tuple{Any}","page":"Reference","title":"InferenceReport.trace_plot_cumulative","text":"trace_plot_cumulative(context)\n\n\nCumulative averages as a function of iteration. \n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.view_webpage-Tuple{Any}","page":"Reference","title":"InferenceReport.view_webpage","text":"view_webpage(exec_folder)\n\n\n\n\n\n\n","category":"method"},{"location":"reference/#InferenceReport.@reproducible-Tuple{Expr}","page":"Reference","title":"InferenceReport.@reproducible","text":"Returns a pair, where the first argument is  the provided expression verbatim, and the second,  the expression as a string to be used as the  reproducibility_command argument in report  and report_to_docs.\n\n\n\n\n\n","category":"macro"},{"location":"bibliography/#Bibliography","page":"Bibliography","title":"Bibliography","text":"","category":"section"},{"location":"bibliography/","page":"Bibliography","title":"Bibliography","text":"Gelman,¬†A.; Carlin,¬†J.¬†B.; Stern,¬†H.¬†S.; Dunson,¬†D.¬†B.; Vehtari,¬†A. and Rubin,¬†D.¬†B. (2013). Bayesian Data Analysis. 3rd edition¬†Edition (Chapman and Hall/CRC).\n\n\n\nNeal,¬†R.¬†M. (2003). Slice sampling. The¬†Annals¬†of¬†Statistics 31, 705‚Äì767.\n\n\n\nPagani,¬†F.; Wiegand,¬†M. and Nadarajah,¬†S. (2022). An n-dimensional Rosenbrock distribution for Markov chain Monte Carlo testing. Scandinavian¬†Journal¬†of¬†Statistics 49, 657‚Äì680.\n\n\n\nRubin,¬†D.¬†B. (1981). Estimation in Parallel Randomized Experiments. Journal¬†of¬†Educational¬†Statistics 6, 377‚Äì401. Accessed on May 8, 2024.\n\n\n\n","category":"page"},{"location":"#index","page":"User guide","title":"InferenceReport","text":"","category":"section"},{"location":"#Summary","page":"User guide","title":"Summary","text":"","category":"section"},{"location":"","page":"User guide","title":"User guide","text":"InferenceReport is a Julia package to automatically create reports based on MCMC inference methods. ","category":"page"},{"location":"#installing-infer","page":"User guide","title":"Installing InferenceReport","text":"","category":"section"},{"location":"","page":"User guide","title":"User guide","text":"If you have not done so, install Julia. Julia 1.9 and higher are supported. \nInstall InferenceReport using","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"using Pkg; Pkg.add(\"InferenceReport\")","category":"page"},{"location":"#Usage","page":"User guide","title":"Usage","text":"","category":"section"},{"location":"","page":"User guide","title":"User guide","text":"InferenceReport's main function is report. It takes one  mandatory argument, which at the moment can be either Pigeons'  Parallel Tempering (PT) output, or MCMCChains' Chains struct. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"We provide an example of each in the next two sections. ","category":"page"},{"location":"#From-Pigeons","page":"User guide","title":"From Pigeons","text":"","category":"section"},{"location":"","page":"User guide","title":"User guide","text":"First, run Parallel Tempering (PT) via Pigeons. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"Then call report() on the resulting PT struct:","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"using InferenceReport\nusing Pigeons \n\npt = pigeons(\n        target = toy_mvn_target(2), \n        n_rounds = 4,\n        record = [traces; round_trip; record_default()])\n\nreport(pt) \nnothing # hide","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"This will generate an HTML report with various useful diagnostic  plots and open it in your default browser. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"See Examples in the left side bar to see examples of such reports. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"See report for more information on the options available. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"You may also generate a TeX/PDF version using  Documenter.jl's TeX support  as follows:","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"report(pt; writer=InferenceReport.Documenter.LaTeX(platform = \"docker\")) \nnothing # hide","category":"page"},{"location":"#From-MCMCChains","page":"User guide","title":"From MCMCChains","text":"","category":"section"},{"location":"","page":"User guide","title":"User guide","text":"MCMCChains.jl is used  to store MCMC samples in packages such as Turing.jl. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"Simply pass it into report to generate and open an HTML report:","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"using InferenceReport\nusing Turing \nusing MCMCChains\n\n# example from Turing.jl's webpage\n@model function coinflip(; N::Int)\n    p ~ Beta(1, 1)\n    y ~ filldist(Bernoulli(p), N)\n    return y\nend;\n\ny = Bool[1, 1, 1, 0, 0, 1]\nmodel = coinflip(; N=length(y)) | (; y)\nchain = sample(model, NUTS(), 100; progress=false)\n\nreport(chain) \nnothing # hide","category":"page"},{"location":"#Target-descriptions","page":"User guide","title":"Target descriptions","text":"","category":"section"},{"location":"","page":"User guide","title":"User guide","text":"Two methods are available to specify descriptions for target  distributions. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"First, a TargetDescription can be passed in as argument:","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"using InferenceReport\nusing Pigeons\n\ntarget = toy_mvn_target(2)\npt = pigeons(; target, n_rounds = 2)\n\ntarget_description = TargetDescription(\n    text = \"\"\"\n    The model description can use math: ``x^2``. \n    \"\"\")\nreport(pt; target_description)\n\nnothing #hide","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"Sometimes we may have a family of targets (e.g., in the above  example, normals  indexed by their dimensionality) and would like the  documentation to be automatically generated based on the parameters. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"To do so, implement your own pigeons_target_description  as done in the following example:","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"using InferenceReport\nusing Pigeons\n\ntarget = toy_mvn_target(2)\npt = pigeons(; target, n_rounds = 2)\n\nconst MyTargetType = typeof(target)\nInferenceReport.pigeons_target_description(target::MyTargetType) = TargetDescription(\n    text = \"\"\"\n    Some description. \n\n    It can use information in the target, e.g. here \n    to report that its dimension is: $(target.dim)\n    \"\"\"\n)\n\nnothing #hide","category":"page"},{"location":"#Adding-references-to-a-bibliography","page":"User guide","title":"Adding references to a bibliography","text":"","category":"section"},{"location":"","page":"User guide","title":"User guide","text":"To create a bibliography, we provide automatic integration with  DocumenterCitations. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"In the target description's text, use a syntax like ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"[bib_key](@citet)","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"to include a citation (see DocumenterCitations for  more citation styles).  Then pass include the contents of bibtex file to  pigeons_target_description's  bibliography argument.","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"using InferenceReport\nusing Pigeons\n\ntarget = toy_mvn_target(2)\npt = pigeons(; target, n_rounds = 2)\n\nreport(pt; \n    target_description = TargetDescription(\n        text = \"\"\"\n        The model description can use math: ``x^2``.\n        Citation: [neal_slice_2003](@citet)\n        \"\"\", \n        bibliography = InferenceReport.example_bib()\n    ))\n\nnothing #hide","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"See funnel_model and Bibliography in the navigation bar to see examples  of linked bibliographic  items. ","category":"page"},{"location":"#Reproducibility-instructions","page":"User guide","title":"Reproducibility instructions","text":"","category":"section"},{"location":"","page":"User guide","title":"User guide","text":"Simple Pigeons reproducibility instructions can be added to the generated page.  This is done via the reproducibility_command argument to report.  This should be a string showing how to create an  Inputs struct.  When reproducibility_command is provided, InferenceReport will  combine it to information queried in the current git repository to  attempt to string together a mini-script that can be used to reproduce the  result. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"To help filling reproducibility_command, we provide a macro,  @reproducible, which, given an expression,  produces a pair containing the verbatim expression as well as its string value.  Here his an example:","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"using InferenceReport\nusing Pigeons \n\ninputs, reproducibility_command = \n        @reproducible Inputs(\n            target = toy_mvn_target(1), n_rounds = 4, record = [traces])\npt = pigeons(inputs)\n\nreport(pt; reproducibility_command) \n\nnothing # hide","category":"page"},{"location":"#Adding-postprocessors","page":"User guide","title":"Adding postprocessors","text":"","category":"section"},{"location":"","page":"User guide","title":"User guide","text":"Calling report() triggers a list of postprocessors, each creating a section  in the generated report. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"To add a custom section in the report, first, create a function taking  as input the PostprocessContext which contains all  required information such as the MCMC traces. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"Here is an example of postprocessor outputting the number of dimensions:","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"using InferenceReport\nusing MCMCChains\nimport InferenceReport: get_chains, default_postprocessors, add_table, add_plot, add_markdown\n\nfunction report_dim(context) \n    chns = get_chains(context)\n    params = names(chns, :parameters)\n    n_params = length(params)\n    add_markdown(context; \n        title = \"Dimension\", \n        contents = \"The target has $n_params parameters.\"\n    )\nend","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"Various utilities are available to generate contents,  see for example add_table, add_plot, add_markdown.","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"Then, to use the custom postprocessor, add it to the  postprocessors argument:","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"using Pigeons \n\npt = pigeons(\n        target = toy_mvn_target(2), \n        n_rounds = 4,\n        record = [traces; round_trip; record_default()])\n\nreport(pt; postprocessors = [report_dim; default_postprocessors()]) \nnothing # hide","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"Pull requests for additional postprocessors are welcome. ","category":"page"},{"location":"#Documenter.jl-integration","page":"User guide","title":"Documenter.jl integration","text":"","category":"section"},{"location":"","page":"User guide","title":"User guide","text":"Note: at the moment, this feature is supported on Julia 1.10+ only. ","category":"page"},{"location":"","page":"User guide","title":"User guide","text":"See our Documenter.jl make file to see how to  integrate InferenceReport into a broader documentation page.  The key functions used are headless,  report_to_docs and  as_doc_page. ","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Description","page":"eight_schools_centered_model","title":"Description","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"A common posterior distribution, based on data from Rubin (1981) used to to illustrate hierarchical  modelling Gelman et al. (2013).  It is also used to benchmark MCMC methods,  due to a mild \"funnel-type\" behaviour.   The terminology 'centered' refers to the original parameterization, to  contrast with a reparameterization which is less challenging and hence  less interesting in an MCMC benchmarking context. ","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Stan implementation Data","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Pair-plot","page":"eight_schools_centered_model","title":"Pair plot","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Diagonal entries show estimates of the marginal  densities as well as the (0.16, 0.5, 0.84)  quantiles (dotted lines).  Off-diagonal entries show estimates of the pairwise  densities. ","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Movie linked below (üçø) superimposes  100 iterations  of MCMC. ","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<img src=\"pair_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"pair_plot.png\"> üîç Full page </a> ‚èê<a href=\"moving_pair.mp4\">üçø Movie </a> ‚èê<a href=\"https://sefffal.github.io/PairPlots.jl\">üîó Info </a>","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Trace-plots","page":"eight_schools_centered_model","title":"Trace plots","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<img src=\"trace_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"trace_plot.png\"> üîç Full page </a>  ","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Intervals","page":"eight_schools_centered_model","title":"Intervals","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Nominal coverage requested: 0.95  (change via interval_probability option which can be passed to report()). ","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"The credible interval (naive_left, naive_right) is constructed using the quantiles  of the posterior distribution. It is naive in the sense that it does not take  into account additional uncertainty brought by the Monte Carlo approximation. ","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"The radius of a Monte Carlo confidence interval with the same nominal coverage,  constructed on each of the end points of the naive interval is shown in  mcci_radius_left and mcci_radius_left. ","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Finally, (fused_left, fused_right) is obtained by merging the two sources of  uncertainty: statistical, captured by the credible interval, and computational,  captured by the confidence intervals on the end points. ","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"parameters naive_left naive_right mcci_radius_left mcci_radius_right fused_left fused_right\ntheta.1 -2.91996 19.4868 0.598527 1.22427 -3.51849 20.7111\ntheta.2 -3.79536 15.0073 0.612323 1.20613 -4.40768 16.2135\ntheta.3 -7.20749 13.1201 1.29443 0.908654 -8.50192 14.0288\ntheta.4 -3.94732 14.8018 0.815731 0.702185 -4.76305 15.504\ntheta.5 -6.02269 12.3214 1.18014 0.744087 -7.20284 13.0655\ntheta.6 -6.34239 13.3559 1.38106 0.681316 -7.72345 14.0372\ntheta.7 -2.21928 17.7011 0.850694 1.76646 -3.06998 19.4676\ntheta.8 -5.01758 16.8218 1.0512 0.991015 -6.06878 17.8128\nmu -1.65904 10.923 0.457573 0.345867 -2.11661 11.2688\ntau 0.201119 11.3367 0.0455789 0.736348 0.15554 12.0731\nlog_density -65.9399 -35.3575 0.662849 1.62981 -66.6027 -33.7277","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<a href=\"Intervals.csv\">üíæ CSV</a> ‚èê<a href=\"https://xkcd.com/2110/\">üîó Info </a>","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Moments,-MCSE,-ESS,-etc","page":"eight_schools_centered_model","title":"Moments, MCSE, ESS, etc","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"The ESS/MCSE/Rhat estimators use InferenceReports.safe_summarystats(chains), which are based on  the truncated autocorrelation estimator (Geyer, 1992, sec 3.3) computed with FFT  with no lag limit.   As a result, these estimators should be  safe to use in the low relative ESS regime, in contrast to the defaults used in MCMCChains,  which lead to catastrophic ESS over-estimation in that regime.","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"parameters mean std mcse ess_bulk ess_tail rhat ess_per_sec\ntheta.1 6.21749 5.4945 0.12166 2058.71 1762.69 1.00127 missing\ntheta.2 4.82666 4.53564 0.102923 1955.57 1786.66 1.0021 missing\ntheta.3 3.95023 5.22829 0.128273 1664.99 1944.79 1.00379 missing\ntheta.4 4.8114 4.60648 0.102313 2004.65 1552.09 1.00123 missing\ntheta.5 3.85744 4.52519 0.102747 1950.62 1602.7 1.00141 missing\ntheta.6 4.29979 4.76573 0.122007 1506.52 1892.75 1.00003 missing\ntheta.7 6.22316 4.93107 0.124925 1562.93 1819.31 1.00081 missing\ntheta.8 5.10046 5.31979 0.149947 1282.59 1724.97 1.00169 missing\nmu 4.52265 3.26878 0.0797936 1698.75 1317.49 1.00234 missing\ntau 3.50489 3.04328 0.0789121 1402.89 1109.54 1.00194 missing\nlog_density -53.5488 7.64762 0.212737 1362.43 1018.66 1.00798 missing","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<a href=\"Moments__MCSE__ESS__etc.csv\">üíæ CSV</a> ","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Cumulative-traces","page":"eight_schools_centered_model","title":"Cumulative traces","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"For each iteration i, shows the running average up to i, frac1i sum_n = 1^i x_n. ","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<img src=\"cumulative_trace_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"cumulative_trace_plot.png\"> üîç Full page </a>  ","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Local-communication-barrier","page":"eight_schools_centered_model","title":"Local communication barrier","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"When the global communication barrier is large, many chains may  be required to obtain tempered restarts.","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"The local communication barrier can be used to visualize the cause  of a high global communication barrier. For example, if there is a  sharp peak close to a reference constructed from the prior, it may  be useful to switch to a variational approximation.","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<img src=\"local_barrier.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"local_barrier.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Local-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Local-communication-barrier-(variational)","page":"eight_schools_centered_model","title":"Local communication barrier (variational)","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Local communication barrier for the variational leg (ideally   smaller than the non-variational one).","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<img src=\"local_barrier_variational.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"local_barrier_variational.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Local-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/eight_schools_centered_model/src/#GCB-estimation-progress","page":"eight_schools_centered_model","title":"GCB estimation progress","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Estimate of the Global Communication Barrier (GCB)  as a function of  the adaptation round. ","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"The global communication barrier can be used  to set the number of chains.  The theoretical framework of Syed et al., 2021 yields that under simplifying assumptions, it is optimal to set the number of chains  (the argument n_chains in pigeons()) to roughly 2Œõ.","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Last round estimate: 1454392162258955e-14","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<img src=\"global_barrier_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"global_barrier_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Global-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/eight_schools_centered_model/src/#GCB-estimation-progress-(variational)","page":"eight_schools_centered_model","title":"GCB estimation progress (variational)","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Estimate of the Global Communication Barrier (GCB)  as a function of  the adaptation round for the variational chain.","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Last round estimate: 19248223311443846","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<img src=\"global_barrier_variational_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"global_barrier_variational_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Global-communication-barrier\">üîó Info </a>","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Evidence-estimation-progress","page":"eight_schools_centered_model","title":"Evidence estimation progress","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Estimate of the log normalization (computed using  the stepping stone estimator) as a function of  the adaptation round. ","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Last round estimate: -32058543933538196","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<img src=\"stepping_stone_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"stepping_stone_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-normalization/\">üîó Info </a>","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Round-trips","page":"eight_schools_centered_model","title":"Round trips","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Number of tempered restarts   as a function of  the adaptation round. ","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"A tempered restart happens when a sample from the  reference percolates to the target. When the reference  supports iid sampling, tempered restarts can enable  large jumps in the state space.","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<img src=\"n_tempered_restarts_progress.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"n_tempered_restarts_progress.png\"> üîç Full page </a>  ‚èê<a href=\"https://pigeons.run/dev/output-pt/#Round-trips-and-tempered-restarts\">üîó Info </a>","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Swaps-plot","page":"eight_schools_centered_model","title":"Swaps plot","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<img src=\"swaps_plot.png\" style=\"display: block; max-width:100%; max-height:500px; width:auto; height:auto;\"/>\n<a href=\"swaps_plot.png\"> üîç Full page </a>  ","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Pigeons-summary","page":"eight_schools_centered_model","title":"Pigeons summary","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"round n_scans n_tempered_restarts global_barrier global_barrier_variational last_round_max_time last_round_max_allocation stepping_stone\n1 2 0 7.10543e-15 7.10543e-15 0.0506306 3.12944e6 0.0\n2 4 0 0.0 7.10543e-15 0.018473 287920.0 -5.32907e-15\n3 8 0 7.10543e-15 1.06581e-14 0.0379588 579360.0 1.77636e-15\n4 16 8 1.33227e-14 1.42109e-14 0.0782277 1.1873e6 1.77636e-15\n5 32 24 7.99361e-15 9.76996e-15 0.16131 2.15973e6 -3.55271e-15\n6 64 33 1.19904e-14 1.84532 0.482482 4.63901e7 -32.1981\n7 128 72 1.06581e-14 2.17021 0.787598 8.98167e7 -32.2939\n8 256 159 1.35447e-14 1.91212 1.67375 1.81834e8 -32.2042\n9 512 315 1.38778e-14 1.83285 3.75364 3.58721e8 -32.1978\n10 1024 625 1.45439e-14 1.92482 6.57718 7.26076e8 -32.0585","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<a href=\"Pigeons_summary.csv\">üíæ CSV</a> ‚èê<a href=\"https://pigeons.run/dev/output-reports/\">üîó Info </a>","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Pigeons-inputs","page":"eight_schools_centered_model","title":"Pigeons inputs","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"Keys Values\nextended_traces false\nchecked_round 0\nextractor nothing\nrecord Function[Pigeons.traces, Pigeons.round_trip, Pigeons.log_sum_ratio, Pigeons.timing_extrema, Pigeons.allocation_extrema]\nmultithreaded false\nshow_report true\nn_chains 10\nvariational GaussianReference(Dict{Symbol, Any}(:singleton_variable => [6.217487028983885, 4.826659190680483, 3.950228853257528, 4.811397963095365, 3.857440248042776, 4.299793477614982, 6.223156787798201, 5.100459025248878, 4.522648905333596, 0.8393077168872618]), Dict{Symbol, Any}(:singleton_variable => [5.494496859251043, 4.535638455227883, 5.228286284063153, 4.60648394508089, 4.52519151070326, 4.765731778404746, 4.9310686243161825, 5.319791735950217, 3.268782499674879, 1.020010346054867]), 5)\nexplorer nothing\nn_chains_variational 10\ntarget StanLogPotential(eight_schools_centered_model)\nn_rounds 10\nexec_folder nothing\nreference nothing\ncheckpoint false\nseed 1","category":"page"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"<a href=\"Pigeons_inputs.csv\">üíæ CSV</a> ‚èê<a href=\"https://pigeons.run/dev/reference/#Pigeons.Inputs\">üîó Info </a>","category":"page"},{"location":"generated/eight_schools_centered_model/src/#Reproducibility","page":"eight_schools_centered_model","title":"Reproducibility","text":"","category":"section"},{"location":"generated/eight_schools_centered_model/src/","page":"eight_schools_centered_model","title":"eight_schools_centered_model","text":"run(`git clone https://github.com/Julia-Tempering/InferenceReport.jl`)\ncd(\"InferenceReport.jl\")\nrun(`git checkout 0c7301eca2344550e208ca70eff2a1ff6440f00c`)\n\nusing Pkg \nPkg.activate(\".\")\nPkg.instantiate()\n \n\nusing Pigeons\ninputs = Inputs(; target = Pigeons.stan_eight_schools(), variational = GaussianReference(first_tuning_round = 5), n_chains_variational = 10, n_rounds = 10, record = [traces; round_trip; record_default()])\n \n\npt = pigeons(inputs)\n","category":"page"}]
}
